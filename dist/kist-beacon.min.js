/*! kist-beacon 0.1.1 - Front-end logging interface. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a){function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function c(a){for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)a[c]=b[c]}return a}function d(a){var b;return b=c({},{logType:"Generic",userAgent:navigator.userAgent,time:Date.now?Date.now():(new Date).getTime()},a)}function e(a){var b=[],c=encodeURIComponent;for(var d in a)a.hasOwnProperty(d)&&b.push(c(d)+"="+c(a[d]));return b.join("&")}function f(){function b(b){var c=a.console[b];a.console[b]=function(d){for(var e=0,f=l.console.length;f>e;e++)i.call(l.console[e],b,d);c.apply?c.apply(a.console,arguments):c(Array.prototype.slice.apply(arguments).join(" "))}}if(a.console&&!k){k=!0;for(var c=["log","warn","error"],d=0;d<c.length;d++)b(c[d])}}function g(){n&&n.apply(a,arguments);for(var b=0,c=l.js.length;c>b;b++)h.apply(l.js[b],arguments);return!1}function h(a,b,c){return this.send(d({logType:"JS Error",errorMessage:a,url:b,lineNumber:c}))}function i(b,c){return this.send(d({logType:"Console call",methodType:b,url:a.location.href,message:c}))}function j(a){var b=[];this.options=c({},this.defaults,a);for(var d in this.options)!this.options.hasOwnProperty(d)||"console"!==d&&"js"!==d||this.options[d]&&b.push(d);m.setup.call(this,b),this.options.console&&f()}var k=!1,l={js:[],console:[]},m={setup:function(a){for(var b=0,c=a.length;c>b;b++)l[a[b]].push(this)},destroy:function(){var a,c;for(var d in l)l.hasOwnProperty(d)&&(c=l[d],a=b(c,this),-1!==a&&c.splice(a,1))}},n=a.onerror;a.onerror=g,j.prototype.send=function(a){return a=d(a),(new Image).src=this.options.url+"?"+e(a),a},j.prototype.destroy=function(){m.destroy.call(this)},j.prototype.defaults={url:"",js:!0,console:!1},a.kist=a.kist||{},a.kist.Beacon=j}(window,document);