/*! kist-beacon 0.1.0 - Front-end logging interface. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
var Kist=Kist||{};Kist.Beacon=function(){var a={};return a.settings={},a.init=function(a){this.settings.loggerUrl=a.loggerUrl,this.bindActions()},a.bindActions=function(){var b=this;window.onerror=function(a,c,d){b.catchJsError(a,c,d)},a.interceptConsole()},a.serializeParams=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},a.interceptConsole=function(){var a=this;if(window.console)for(var b=function(b){var c=window.console[b];window.console[b]=function(){if(a.catchConsoleCall(b,arguments[0]),c.apply)c.apply(window.console,arguments);else{var d=Array.prototype.slice.apply(arguments).join(" ");c(d)}}},c=["log","warn","error"],d=0;d<c.length;d++)b(c[d])},a.imageCall=function(a){var b=new Image,c=a;c.userAgent=navigator.userAgent,c.time=this.getTimestamp(),b.src=this.settings.loggerUrl+"?"+this.serializeParams(a)},a.ajaxCall=function(a){var b=new XMLHttpRequest,c=a;c.userAgent=navigator.userAgent,c.time=Date.now?Date.now():(new Date).getTime(),b.open("GET",this.settings.loggerUrl+"?"+this.serializeParams(a),!0),b.send()},a.catchJsError=function(a,b,c){var d={logType:"JS Error",errorMessage:a,url:b,lineNumber:c};this.ajaxCall(d)},a.catchConsoleCall=function(a,b){var c={logType:"Console call",methodType:a,message:b};this.ajaxCall(c)},a}();